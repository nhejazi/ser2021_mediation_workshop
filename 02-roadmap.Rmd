# Path-specific casual mediation effect types {#estimands}

- Controlled direct effects
- Natural direct and indirect effects
- Interventional direct and indirect effects

## Controlled direct effects {-}
$E(Y_{1,m}) - E(Y_{0,m})$

- Set $M=m$ uniformly for everyone in sample
- Assumptions:

	+ $A \perp Y_{a,m} | W$ 
	+ $M \perp Y_{a,m} | W, A$
	+ and positivity assumptions: $P(M =m | A=a,W) > 0 \text{  } a.e.$ and $P(A=a | W) > 0 \text{  } a.e.$

```{r pressure, echo=FALSE, fig.cap="", out.width = '50%'}
knitr::include_graphics("img/graphic4a3.pdf")
```

- Is this the estimand I want?
  + Makes the most sense if can intervene directly on $M$ 
	+ and can think of a policy that would involve setting everyone to one constant level of $m$.
	+ Pearl calls this prescriptive
	+ Can you think of an example?
	+ Air pollution, rescue inhaler dosage, hospital visits

_What if our research question doesn't involve intervening directly on the mediator?_


## Natural direct and indirect effects {-}

Natural direct effect: $E(Y_{1,M_0}) - E(Y_{0,M_0})$

Natural indirect effect: $E(Y_{1,M_1}) - E(Y_{1,M_0})$ 

The NDE can also be written as: $E_W \sum_m \{E(Y_{1,m}|W) - E(Y_{0,m}|W)\} P(M_{0}=m | W)$

- Weighted average of controlled direct effects at each level of $m$
- If no interaction between $A$ and $M$ on $Y$, then CDE = NDE 

```{r , echo=FALSE, fig.cap="", out.width = '50%'}
knitr::include_graphics("img/graphic4a.pdf")
```

Identification assumptions:

- $A \perp Y_{a,m} | W$ 
- $M \perp Y_{a,m} | W, A$
- $A \perp M_a | W$ 
- $M_{a^*} \perp Y_{a,m} | W$
- and positivity assumptions

What does $M_0 \perp Y_{1,m} | W$ mean?

-  Conditional on $W$, knowledge of $M$ in the absence of treatment $A$ provides no information of the effect of $A$ on $Y$\footnotemark
- Can you think of a data-generating mechanism that would violate this assumption?
- Whenever we believe that treatment assignment works through adherence (i.e., almost always), we are violating this assumption

Is this the estimand I want?

- Makes sense to intervene on $A$ but not directly on $M$
- Want to understand a natural mechanism underlying an association/ total effect. Pearl calls this descriptive.\footnotemark
- NDE + NIE = total effect (ATE)
- Okay with the assumptions

_What if our data structure involves a post-treatment confounder of the mediator-outcome relationship (e.g., adherence)?_

```{r , echo=FALSE, fig.cap="", out.width = '20%'}
knitr::include_graphics("img/medDAG2.pdf")
```

```{r , echo=FALSE, fig.cap="", out.width = '50%'}
knitr::include_graphics("img/ctndag.pdf")
```

## Interventional direct/ indirect effects {-}

- Fully conditional on past\footnotemark$^,$\footnotemark
 + Conditional SDE: $E(Y_{a, g_{M|Z,a*,W}}) - E(Y_{a^*, g_{M|Z,a*,W}})$
 + Conditional SIE: $E(Y_{a, g_{M|Z,a,W}}) - E(Y_{a, g_{M|Z,a*,W}})$
 + Marginal SDE: $E(Y_{a, g_{M|a*,W}}) - E(Y_{a^*, g_{M|a*,W}})$
 + Marginal SIE: $E(Y_{a, g_{M|a,W}}) - E(Y_{a, g_{M|a*,W}})$
 + $g_{M|Z,a^*,W}$, $g_{M|a^*,W}$ represents stochastic intervention on the mediator, where value $m$ is drawn with probability $P(M=m|Z, A=a^*,W=w)$, $P(M=m|A=a^*,W=w)$, respectively
 + Can you think of an example when you would want the conditional versions? Marginal versions?

```{r , echo=FALSE, fig.cap="", out.width = '50%'}
knitr::include_graphics("img/graphic4b.pdf")
```

Identification assumptions:

- $A \perp Y_{a,m} | W$ 
- $M \perp Y_{a,m} | W, A$
- $A \perp M_a | W$ 
- and positivity assumptions

Is this the estimand I want?

- Makes sense to intervene on $A$ but not directly on $M$
- Want to understand a natural mechanism underlying an association/ total effect
- Okay with the assumptions!


## Estimand Summary {-}

```{r , echo=FALSE, fig.cap="", out.width = '100%'}
knitr::include_graphics("img/table1.pdf")
```
